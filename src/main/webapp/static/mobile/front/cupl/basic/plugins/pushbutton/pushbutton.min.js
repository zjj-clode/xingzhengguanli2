(function(a,b){if(typeof define==="function"&&define.amd){define([],b)}else{if(typeof exports==="object"){module.exports=b()}else{a.Pushbutton=b()}}}(this,function(){function a(c,b){this.ele=$(c);var d=this.ele.attr("id");if(!d){d="pushbutton"+Math.random().toString().replace("0.","");this.ele.attr("id",d)}this.id=$("#"+d);this.init(b)}a.prototype={version:"1.0.0",init:function(b){this.options={};this.options.maxHeight=240;this.options.animateIn="pushbutton-in";this.options.animateOut="pushbutton-out";$.extend(this.options,b);this.render()},render:function(){this.id.addClass("widget-ui-pushbutton").html(this.createTpl());this.show();this.event()},destroy:function(){this.id.remove()},refresh:function(b){if(!b){b=this.options}else{$.extend(this.options,b)}this.init(b)},forInAttr:function(d){var b="",c;for(c in d){b+=c+'="'+d[c]+'" '}return b},createTpl:function(){var f,q,o,p,l,e=0,c=0,g,m=0;var h=this.options;var d=h.data;var b=this.id;if(!Array.isArray(d)){d=[]}var k=d.length;var j='<div class="widget-ui-pushbutton-list" style="max-height:'+h.maxHeight+'px;">';for(;e<k;e++){f=d[e];q=f.cls||"";p=f.text||"";g=f.attr;l="";if(typeof g=="object"&&!Array.isArray(g)){l+=this.forInAttr(g)}else{if(Array.isArray(g)){m=g.length;for(c=0;c<m;c++){l+=this.forInAttr(g[c])}}}j+='<a href="javascript:void(0);" tabIndex="'+e+'" class="list-a '+q+'" '+l+">"+p+"</a>"}j+='<a href="javascript:void(0);" class="pushbutton-cancel">取消</a>					</div>';return j},hasClass:function(d,b,c){if(typeof d==="string"){d=(c||document).querySelector(d)}if(!d||!d.className||typeof b!=="string"){return false}return !!d.className.match(new RegExp("\\b"+b+"\\b"))},event:function(){var h=this.id;var g=this.options;var d=g.data||[];var f=g.onClick;var c=false;var b=[];var e="";h.on("click",function(i){e=i.target||i.srcElement;c=false;i.index=i.target.tabIndex;i.data=d[i.index];if(typeof f==="function"){c=f(i);if(!c||!this.hasClass(e,"list-a")){this.hide()}}else{this.hide()}}.bind(this))},show:function(){var b=this.options.animateIn;this.id.show().addClass(b)},hide:function(){var e=this.options;var b=e.animateIn;var d=e.animateOut;var c=this.id;c.addClass(d);setTimeout(function(){c.removeClass(d+" "+b).hide()},351)}};return a}));